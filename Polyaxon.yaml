version: 1.1
kind: component
run:
  kind: job
  init:
  - git: {
      url: 'https://github.com/ss3095/Poly-axon-example.git',
      revision: 'main',
      auth: {token: "{{ github_token }}"}
    }
  container:
    image: python:3.8
    command: ["pip", "install", "-r", "requirements.txt"]
    args: ["python", "train.py"]
    env:
    - name: GITHUB_TOKEN
      valueFrom:
        secretKeyRef:
          name: github-token
          key: token
